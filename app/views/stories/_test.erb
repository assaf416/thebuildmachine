<%#= raw Pygments.highlight(@story.code, lexer: @snippet.language) %>

<% content_for :head do  %>
  <script language="Javascript" type="text/javascript">
    // initialisation
    editAreaLoader.init({
      id: "example_1"	// id of the textarea to transform		
      ,start_highlight: true	// if start with highlight
      ,allow_resize: "both"
      ,allow_toggle: true
      ,word_wrap: true
      ,language: "en"
      ,syntax: "brainfuck"	
    });
		
	
		
	
		
	
    // callback functions
    function my_save(id, content){
      alert("Here is the content of the EditArea '"+ id +"' as received by the save callback function:\n"+content);
    }
		
    function my_load(id){
      editAreaLoader.setValue(id, "The content is loaded from the load_callback function into EditArea");
    }
		
    function test_setSelectionRange(id){
      editAreaLoader.setSelectionRange(id, 100, 150);
    }
		
    function test_getSelectionRange(id){
      var sel =editAreaLoader.getSelectionRange(id);
      alert("start: "+sel["start"]+"\nend: "+sel["end"]); 
    }
		
    function test_setSelectedText(id){
      text= "[REPLACED SELECTION]"; 
      editAreaLoader.setSelectedText(id, text);
    }
		
    function test_getSelectedText(id){
      alert(editAreaLoader.getSelectedText(id)); 
    }
		
    function editAreaLoaded(id){
      if(id=="example_2")
      {
        open_file1();
        open_file2();
      }
    }
		
    function open_file1()
    {
      var new_file= {id: "to\\ é # € to", text: "$authors= array();\n$news= array();", syntax: 'php', title: 'beautiful title'};
      editAreaLoader.openFile('example_2', new_file);
    }
		
    function open_file2()
    {
      var new_file= {id: "Filename", text: "<a href=\"toto\">\n\tbouh\n</a>\n<!-- it's a comment -->", syntax: 'html'};
      editAreaLoader.openFile('example_2', new_file);
    }
		
    function close_file1()
    {
      editAreaLoader.closeFile('example_2', "to\\ é # € to");
    }
		
    function toogle_editable(id)
    {
      editAreaLoader.execCommand(id, 'set_editable', !editAreaLoader.execCommand(id, 'is_editable'));
    }
	
  </script>
<% end %>


<form action='' method='post'>
  <fieldset>
    <textarea id="example_1" style="height: 350px; width: 100%;" name="test_1">

      Feature: Addition
        In order to avoid silly mistakes
        As a math idiot 
        I want to be told the sum of two numbers

        Scenario Outline: Add two numbers
          Given I have entered <input_1> into the calculator
          And I have entered <input_2> into the calculator
          When I press <button>
          Then the result should be <output> on the screen

        Examples:
          | input_1 | input_2 | button | output |
          | 20      | 30      | add    | 50     |
          | 2       | 5       | add    | 7      |
          | 0       | 40      | add    | 40     |



      Feature: Addition
        In order to avoid silly mistakes
        As a math idiot 
        I want to be told the sum of two numbers

        Scenario Outline: Add two numbers
          Given I have entered <input_1> into the calculator
          And I have entered <input_2> into the calculator
          When I press <button>
          Then the result should be <output> on the screen

        Examples:
          | input_1 | input_2 | button | output |
          | 20      | 30      | add    | 50     |
          | 2       | 5       | add    | 7      |
          | 0       | 40      | add    | 40     |


    </textarea>
  </fieldset>
</form>
